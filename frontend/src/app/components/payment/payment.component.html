<div class="flex flex-col lg:flex-row max-w-4xl mx-auto my-10 p-8 bg-white shadow-lg rounded-lg">
    <div class="payment-container max-w-lg mx-auto my-10 p-8 bg-white shadow-lg rounded-lg">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6 text-center">Pago con tarjeta</h2>

        <!-- Tarjeta de crédito visual -->
        <div class="card-container mb-6">
            <div class="credit-card bg-indigo-600 text-white w-full max-w-sm mx-auto p-4 rounded-lg shadow-md relative">
                <div class="card-top flex justify-between items-center mb-4">
                    <img [src]="cardLogo" alt="Card Logo" class="w-12" *ngIf="cardLogo">
                    <span class="text-sm">Válido hasta {{ expiryDate || 'MM/YY' }}</span>
                </div>
                <div class="card-number text-xl tracking-wide mb-6">{{ cardNumber || '1234 5678 9101 1121' }}</div>
                <div class="card-bottom flex justify-between items-center">
                    <span class="text-sm">{{ name || 'Juan Pérez' }}</span>
                    <span class="text-sm">CVV: {{ cvv || '123' }}</span>
                </div>
            </div>
        </div>


        <!-- Formulario de pago -->
        <form (ngSubmit)="processPayment()">
            <div class="form-group mb-4">
                <label for="cardNumber" class="block text-gray-600 text-sm mb-2">Número de tarjeta</label>
                <input type="text" id="cardNumber" name="cardNumber" [(ngModel)]="cardNumber"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
                    placeholder="1234 5678 9101 1121" required maxlength="19" (input)="formatCardNumber($event)">
            </div>

            <div class="flex space-x-4 mb-4">
                <div class="form-group w-1/2">
                    <label for="expiryDate" class="block text-gray-600 text-sm mb-2">Fecha de vencimiento</label>
                    <input type="text" id="expiryDate" name="expiryDate" [(ngModel)]="expiryDate"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
                        placeholder="MM/YY" required maxlength="5" (input)="formatExpiryDate($event)">
                </div>

                <div class="form-group w-1/2">
                    <label for="cvv" class="block text-gray-600 text-sm mb-2">CVV</label>
                    <input type="text" id="cvv" name="cvv" [(ngModel)]="cvv"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
                        placeholder="123" required maxlength="3">
                </div>
            </div>

            <div class="form-group mb-6">
                <label for="name" class="block text-gray-600 text-sm mb-2">Nombre en la tarjeta</label>
                <input type="text" id="name" name="name" [(ngModel)]="name"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
                    placeholder="Juan Pérez" required>
            </div>

            <div class="form-group mb-6">
                <label for="email" class="block text-gray-600 text-sm mb-2">Correo electrónico</label>
                <input type="email" id="email" name="email" [(ngModel)]="email"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
                    placeholder="tucorreo@ejemplo.com" required>
            </div>

            <button type="submit"
                class="w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700 transition-all duration-300">Pagar</button>
        </form>

        <!-- Mostrar el estado del proceso de pago aquí -->
        <div *ngIf="paymentStatus" class="alert alert-info text-center mb-4 bg-blue-100 text-blue-800 p-2 rounded-lg mt-10">
            {{ paymentStatus }}
        </div>
    </div>
    <div class="cart-items-container w-full lg:w-1/3 p-4 bg-gray-50 rounded-lg shadow-md">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Tu compra</h3>
        <ul>
            <li *ngFor="let item of items" class="mb-2">
                <div class="flex justify-between items-center">
                    <span>{{ item.titulo }} ({{ item.cantidad }})</span>
                    <span>{{ transform(item.precio * item.cantidad) }}</span>
                </div>
            </li>
        </ul>
        <div class="mt-4">
            <h4 class="text-end text-md font-semibold text-gray-800">Total: {{ transform(total) }}</h4>
        </div>
    </div>
</div>